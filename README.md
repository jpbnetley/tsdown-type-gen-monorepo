# tsdown-type-gen-monorepo

This repository is a monorepo for experimenting with TypeScript type generation and management using [tsdown](https://tsdown.dev/).


## Structure
The project consists of 2 parts.
- `app/` — Frontend React application using Vite and TypeScript
- `lib/` — Shared library code, including cache and logging utilities

## Problem statement
### "Go to Definition" is not working for types generated by `tsdown` for the lib sub project.

The lib has the `declarationMap` set in the [tsconfig.json](./lib/tsconfig.json)
This should help with the go to definition jump. [src](https://www.typescriptlang.org/tsconfig/#declarationMap)  
When this property is set, tsdown will generate the types as well as the type map. [src](https://tsdown.dev/options/dts#enable-in-tsconfig-json)  
Tsdown uses the [rolldown-plugin-dts](https://github.com/sxzz/rolldown-plugin-dts)

As seen in the [app/index.ts](./app/src/index.ts) on line 4.  
The go to definition for `AppLogger.info` is in [lib/src/log/AppLogger.ts](./lib/src/log/AppLogger.ts)
But thh IDE is not resolving the path correctly when clicking on the go to definition.  
The path the IDE is opening is [./lib/src/log/log.ts](./lib/src/log/log.ts) but should have been [lib/src/log/AppLogger.ts](./lib/src/log/AppLogger.ts)

## Scripts
- `pnpm run build` — Builds all TypeScript projects and the frontend app
- `pnpm run app:start` — Starts the terminal application

## Getting Started
1. Install dependencies:
   ```sh
   pnpm install
   ```
2. Build the project:
   ```sh
   pnpm run build
   ```
3. Start the app:
   ```sh
   pnpm run app:start
   ```

## Relates issues
- [Incorrect generated .d.ts file with nested re-export](https://github.com/sxzz/rolldown-plugin-dts/issues/121)
- [export * loses type modifiers when flattening re-exports](https://github.com/sxzz/rolldown-plugin-dts/issues/95)